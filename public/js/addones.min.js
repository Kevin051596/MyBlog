let lastScrollTop = 0;
const isDev = !0,
  px = 100,
  labels = {
    "python": [190, 220, 254, 211.9, 97, 87.1],
    "javascript": [255, 222, 130, 44.2, 100, 75.5],
    "git": [255, 155, 113, 17.7, 100, 72.2],
    "crawler": [24, 53, 36, 143.5, 37.4, 38.8],
    "front-end": [234, 154, 178, 342, 65.6, 76.1],
    "back-end": [129, 83, 85, 357.4, 21.7, 41.6],
    "hugo": [238, 75, 106, 348.6, 82.7, 61.4],
    "chatbot": [171, 146, 191, 273.3 ,26.0 ,66.1],
    "life record": [202, 255, 208, 126.8, 100, 89.6],
    "react": [63, 132, 229, 215, 72.5, 89.8],
    "web": [187, 68, 48, 9, 74, 73],
    "webpack": [121, 139, 238, 231, 49.2, 93.3],
    "information security": [2, 8, 135, 237, 98.5, 52.9],
    "forensics": [199, 232, 243, 195, 18.1, 95.3],
    "ctf": [255, 126, 107, 8, 58, 100]
  },
  lightness_threshold = 0.453,
  border_threshold = 0.96;
$(document).ready(() => {
  $(window).scroll(function () {
    $(window).height();
    var e =
      ($(window).scrollTop() / ($(document).height() - $(window).height())) *
        100 +
      "vw";
    $(".view-bar").width(e);
    var l = window.pageYOffset || document.documentElement.scrollTop;
    window.pageYOffset > 100 && l < lastScrollTop
      ? $(`[aria-label="回到頂部"]`).addClass("btn-moveTop-animate")
      : $(`[aria-label="回到頂部"]`).removeClass("btn-moveTop-animate"),
      (lastScrollTop = l <= 0 ? 0 : l);
  }),
    $(".btn-moveTop").click(function (e) {
      e.preventDefault(), $("html,body").animate({ scrollTop: 0 }, 600);
    }),
    $('[class="tag"]').each((e, l) => {
      let a = l.innerText.toLowerCase(),
        [t, o, s, r, _, i] = labels[a],
        c = (0.2126 * t + 0.7152 * o + 0.0722 * s) / 255,
        n = Math.max(0, Math.min(1 / (0.453 - c), 1)),
        b = Math.max(0, Math.min((c - 0.96) * 100, 1));
      (l.style.color = `hsl(0deg, 0%, calc(${n} * 100%))`),
        (l.style.background = `rgb(${t}, ${o}, ${s})`),
        (l.style[
          "border-color"
        ] = `hsla(${r}, calc(${_} * 1%), calc(${i} - 25) * 1%), ${b})`),
        (l.style["font-weight"] = 500),
        (l.style.border = "1px solid transparent"),
        (l.style["font-family"] =
          '-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans"');
    }),
    $(".code").each((e, l) => {
      $(`[aria-label=${l.ariaLabel}] .title`).click(() => {
        $(`[aria-label=${l.ariaLabel}] .title`).toggleClass("click"),
          $(`[aria-label='${l.ariaLabel}'] .content`).slideToggle();
      });
    });
});
