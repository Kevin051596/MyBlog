let lastScrollTop = 0;
const isDev = !0,
  px = 100,
  labels = {
    python: [190, 220, 254, 211.9, 97, 87.1],
    javascript: [255, 222, 130, 44.2, 100, 75.5],
    git: [255, 155, 113, 17.7, 100, 72.2],
    selenium: [24, 53, 36, 143.5, 37.4, 38.8],
    "front-end": [234, 154, 178, 342, 65.6, 76.1],
    "back-end": [129, 83, 85, 357.4, 21.7, 41.6],
    hugo: [238, 75, 106, 348.6, 82.7, 61.4],
  },
  lightness_threshold = 0.453,
  border_threshold = 0.96;
$(document).ready(() => {
  $(window).scroll(function () {
    $(window).height();
    var l =
      ($(window).scrollTop() / ($(document).height() - $(window).height())) *
        100 +
      "vw";
    $(".view-bar").width(l);
    var e = window.pageYOffset || document.documentElement.scrollTop;
    window.pageYOffset > 100 && e < lastScrollTop
      ? $(`[aria-label="回到頂部"], [aria-label="買杯咖啡"]`).addClass(
          "btn-moveTop-animate"
        )
      : $(`[aria-label="回到頂部"], [aria-label="買杯咖啡"]`).removeClass(
          "btn-moveTop-animate"
        ),
      (lastScrollTop = e <= 0 ? 0 : e);
  }),
    $(".btn-moveTop").click(function (l) {
      l.preventDefault(), $("html,body").animate({ scrollTop: 0 }, 600);
    }),
    $('[class="tag"]').each((l, e) => {
      let a = e.innerText.toLowerCase(),
        [t, o, s, r, i, c] = labels[a],
        n = (0.2126 * t + 0.7152 * o + 0.0722 * s) / 255,
        _ = Math.max(0, Math.min(1 / (0.453 - n), 1)),
        b = Math.max(0, Math.min((n - 0.96) * 100, 1));
      (e.style.color = `hsl(0deg, 0%, calc(${_} * 100%))`),
        (e.style.background = `rgb(${t}, ${o}, ${s})`),
        (e.style[
          "border-color"
        ] = `hsla(${r}, calc(${i} * 1%), calc(${c} - 25) * 1%), ${b})`),
        (e.style["font-weight"] = 500),
        (e.style.border = "1px solid transparent"),
        (e.style["font-family"] =
          '-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans"');
    }),
    $(".code").each((l, e) => {
      $(`[aria-label=${e.ariaLabel}] .title`).click(() => {
        $(`[aria-label=${e.ariaLabel}] .title`).toggleClass("click"),
          $(`[aria-label='${e.ariaLabel}'] .content`).slideToggle();
      });
    });
});
